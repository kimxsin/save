<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PetHarmony</title>
  <link rel="stylesheet" href="/home/css/home-style.css">
</head>
<body>
<div class="login">
  <div class="title">
    <h2>ğŸ¶PetHarmonyğŸ¶</h2>
  </div>

  <div class="login-body">
    <form action="/home" method="post" onsubmit="validateForm(event)">
      <div class="login-input">
        <label class="">ì‚¬ë²ˆ </label>
        <input type="text" class="empNo" name="code" placeholder="ì‚¬ì›ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"><br>
      </div>

      <div class="login-pass">
        <label>ë¹„ë°€ë²ˆí˜¸ </label>
        <input type="password" class="empPass" name="pass" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"><br>
      </div>

      <span class="checkbox">
        <input type="checkbox" id="saveEmpNo">
        <span class="checkbox-label">ì‚¬ë²ˆì €ì¥</span>
      </span><br>

      <div class="searchContainer">
        <div class="empSearch">
          <a href="/home/no-search">ì‚¬ì›ë²ˆí˜¸ ì°¾ê¸°</a>
        </div>

        <div class="passSearch">
          <a href="/home/pass-search">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
        </div>

        <div class="empSearch">
          <a href="/user/signup">ì„ì‹œ íšŒì›ê°€ì…</a>
        </div>
      </div>
      <button type="submit" class="success">ë¡œê·¸ì¸</button>
    </form>
  </div>
</div>

<div class="dogImg">
  <img src="/img/dog/dog.png" style="width: 900px; height: auto;">
</div>

<script>
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ì› ë²ˆí˜¸ ìë™ ì…ë ¥
  window.onload = function() {
    const savedEmpNo = localStorage.getItem('empNo');
    if (savedEmpNo) {
      document.querySelector('.empNo').value = savedEmpNo;
      document.getElementById('saveEmpNo').checked = true; // ì²´í¬ë°•ìŠ¤ ì²´í¬
    }

    // ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ì°½ í‘œì‹œ
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('error')) {
      alert('ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤. ì‚¬ì›ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
    }
  };

  function validateForm(event) {
    // ì…ë ¥ í•„ë“œ ê°€ì ¸ì˜¤ê¸°
    const empNo = document.querySelector('.empNo').value;
    const empPass = document.querySelector('.empPass').value;

    // ì•Œë¦¼ ë©”ì‹œì§€ ì´ˆê¸°í™”
    let message = '';

    // ì‚¬ë²ˆ ì…ë ¥ í™•ì¸
    if (!empNo) {
      message += 'ì‚¬ë²ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\n';
    }

    // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í™•ì¸
    if (!empPass) {
      message += 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\n';
    }

    // ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ ì•Œë¦¼ì°½ í‘œì‹œí•˜ê³  í¼ ì œì¶œ ë°©ì§€
    if (message) {
      alert(message);
      event.preventDefault(); // í¼ ì œì¶œ ë°©ì§€
    } else {
      // ì‚¬ë²ˆ ì €ì¥ ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ë˜ì–´ ìˆìœ¼ë©´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
      if (document.getElementById('saveEmpNo').checked) {
        localStorage.setItem('empNo', empNo);
      } else {
        localStorage.removeItem('empNo'); // ì²´í¬ í•´ì œ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚­ì œ
      }
    }
  }
</script>
</body>
</html>
