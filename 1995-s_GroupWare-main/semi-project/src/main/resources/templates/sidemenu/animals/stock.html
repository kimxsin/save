<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>μ¬κ³ κ΄€λ¦¬</title>
    <link rel="stylesheet" href="/main/css/main-style.css"> <!-- λ©”μΈ μ¤νƒ€μΌ μ—°κ²° -->
    <script src="/main/js/main.js"></script> <!-- λ©”μΈ μλ°”μ¤ν¬λ¦½νΈ μ—°κ²° -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=keyboard_arrow_down" />
    <link rel="stylesheet" href="/sidemenu/animals/css/stock-style.css">
</head>
<body>
<header>
    <div class="side-menu-bar">
        <ul>
            <li><a href="/main">π¶PetHarmonyπ¶</a></li>
            <li><a href="http://localhost:9595/sidemenu/schedule">κ·Όνƒκ΄€λ¦¬</a></li>
            <li><a href="http://localhost:9595/sidemenu/messenger">λ©”μ‹ μ €(μ±„ν…)</a></li>
            <li><a href="http://localhost:9595/sidemenu/mail">μ΄λ©”μΌ</a></li>
            <li><a href="http://localhost:9595/sidemenu/adoption">μ…μ–‘</a></li>
            <li class="animal-menu">
                <div class="menu-wrapper">
                    <a href="http://localhost:9595/sidemenu/animals">λ™λ¬Ό
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="http://localhost:9595/sidemenu/animals">κµ¬μ΅°λ™λ¬Ό</a></li>
                    <li><a href="http://localhost:9595/sidemenu/adoptionComplete">μ…μ–‘μ™„λ£</a></li>
                    <li><a href="http://localhost:9595/sidemenu/stock">μ¬κ³ κ΄€λ¦¬</a></li>
                </ul>
            </li>
            <li><a href="http://localhost:9595/sidemenu/facilities">μ‹μ„¤κ΄€λ¦¬</a></li>
            <li><a href="http://localhost:9595/sidemenu/board">μ „μ‚¬κ²μ‹ν</a></li>
            <li><a href="http://localhost:9595/sidemenu/employee">μ§μ›μ •λ³΄</a></li>
            <li><a href="http://localhost:9595/sidemenu/mypage">λ§μ΄νμ΄μ§€</a></li>
            <li><a href="http://localhost:9595/sidemenu/approval">κ²°μ¬</a></li>
            <li class="admin-menu">
                <div class="admin-menu-wrapper">
                    <a href="http://localhost:9595/sidemenu/manager">κ΄€λ¦¬μμ „μ©
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="http://localhost:9595/sidemenu/manager">κ΄€λ¦¬μνμ΄μ§€</a></li>
                    <li><a href="http://localhost:9595/sidemenu/employeeRegister">μ‚¬μ›λ“±λ΅</a></li>
                    <li><a href="http://localhost:9595/sidemenu/employeeManagement">μ§μ›κ΄€λ¦¬</a></li>
                    <li><a href="http://localhost:9595/sidemenu/approvalBox">κ²°μ¬ν•¨</a></li>
                </ul>
            </li>
        </ul>
    </div>
</header>
<div class="change-screen-stock">
    <div id="change-screen-content">

        <table border="1px" style="text-align: center">
            <thead>
            <tr>
                <th style="width: 80px;">ν’λ©μ½”λ“</th>
                <th style="width: 80px;">λ€λ¶„λ¥</th>
                <th style="width: 100px;">ν’λ©κµ¬λ¶„</th>
                <th style="width: 100px;">ν’λ©κ·Έλ£Ή</th>
                <th style="width: 120px;">κ±°λμ²λ…</th>
                <th style="width: 60px;">κµ¬λ§¤</th>
                <th style="width: 130px;">κ±°λμΌμ</th>
                <th style="width: 300px;">ν’λ©λ…</th>
                <th style="width: 200px;">μ¬κ³ μλ‰</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="inventory : ${inventoryList}">
                <td th:text="${inventory.itemCode}"></td>
                <td th:text="${inventory.typeDTO.typeName}"></td>
                <td th:text="${inventory.itemType}"></td>
                <td th:text="${inventory.itemGroup}"></td>
                <td th:text="${inventory.dealName}"></td>
                <td>
                    <button th:attr="onclick=|window.open('${inventory.dealUrl}', '_blank')|"
                            class="btn-dealName">
                        κµ¬λ§¤
                    </button>
                </td>
                <td th:text="${#dates.format(inventory.dealDate, 'yyyy-MM-dd')}"></td>
                <td th:text="${inventory.itemName}"></td>
                <td>
                    <form action="/inventory/update" method="post">
                        <input type="hidden" name="itemCode" th:value="${inventory.itemCode}" />
                        <input type="number" name="itemNum" th:value="${inventory.itemNum}" min="0" max="100" step="10" />
                        <button type="submit">μμ •</button>
                    </form>
                </td>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        // μΏΌλ¦¬ νλΌλ―Έν„°μ—μ„ updateSuccess κ°’μ„ κ°€μ Έμ¤κΈ°
                        var urlParams = new URLSearchParams(window.location.search);
                        var updateSuccess = urlParams.get('updateSuccess');

                        if (updateSuccess === 'true') {
                            alert("μ¬κ³  μμ •μ΄ μ™„λ£λμ—μµλ‹λ‹¤!");

                            // μΏΌλ¦¬ νλΌλ―Έν„°μ—μ„ updateSuccessλ¥Ό μ κ±°
                            history.replaceState(null, '', window.location.pathname);  // μΏΌλ¦¬ νλΌλ―Έν„° μ κ±°
                        }
                    });
                </script>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>

